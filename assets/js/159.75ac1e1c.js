(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{516:function(t,s,a){"use strict";a.r(s);var e=a(15),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("前置阅读：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/27327515233",target:"_blank",rel:"noopener noreferrer"}},[t._v("《一文看懂：MCP(大模型上下文协议)》"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("「可选」"),s("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/commit/5b31f27",target:"_blank",rel:"noopener noreferrer"}},[t._v("《项目接入 MCP Server 代码》"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"_1-如何配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何配置"}},[t._v("#")]),t._v(" 1. 如何配置？")]),t._v(" "),s("p",[t._v("① 在项目的 "),s("code",[t._v("application.yaml")]),t._v(" 中，配置 "),s("code",[t._v("spring.ai.mcp.server")]),t._v(" 配置项，开启 MCP Server ，如下所示：")]),t._v(" "),s("div",{staticClass:"language-YAML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ai")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mcp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yudao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mcp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1.0.0\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("instructions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 一个 MCP 示例服务\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sse-endpoint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /sse\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：")]),t._v(" "),s("p",[t._v("具体每个配置项的作用，可见 "),s("a",{attrs:{href:"https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("《Spring AI 官方文档 —— MCP Client Client Starter》"),s("OutboundLink")],1),t._v(" 文档。")])]),t._v(" "),s("p",[t._v("② 使用 "),s("a",{attrs:{href:"https://docs.spring.io/spring-ai/reference/api/tools.html#_functions_as_tools",target:"_blank",rel:"noopener noreferrer"}},[t._v("“Functions as Tools”"),s("OutboundLink")],1),t._v(" 的方式，编写 MCP Server 的工具。")]),t._v(" "),s("p",[t._v("例如说："),s("code",[t._v("cn.iocoder.yudao.module.ai.tool.method")]),t._v(" 包下的 Person、PersonService、PersonServiceImpl 类。")]),t._v(" "),s("p",[t._v("③ 在 AiAutoConfiguration 的 "),s("code",[t._v("#toolCallbacks(...)")]),t._v(" 方法，注册 MCP Server 的工具。")]),t._v(" "),s("p",[t._v("例如说：PersonService Bean 。")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("接着启动后端项目，可以看到 "),s("code",[t._v("INFO o.s.a.m.s.autoconfigure.McpServerAutoConfiguration")]),t._v(" 日志，表示 MCP Client 启动成功。")]),t._v(" "),s("h2",{attrs:{id:"_2-如何测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何测试"}},[t._v("#")]),t._v(" 2. 如何测试？")]),t._v(" "),s("p",[t._v("① 找一个支持 MCP Server 的工具，例如说 Cursor 或者 Claude 等。这里使用 Cursor，例如说：")]),t._v(" "),s("div",{staticClass:"language-Bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mcpServers"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yudao-mcp-server"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8089/sse"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("② 在 Cursor 输入 “查下 1 这个 person” 消息，触发 MCP Server 的调用。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/MCP_Server/Cursor%E6%B5%8B%E8%AF%95MCPServer.png",alt:"Cursor 测试 MCP Server"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);